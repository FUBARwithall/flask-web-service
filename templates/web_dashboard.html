{% extends 'base.html' %}

{% block title %}Dashboard - Skin Health Manager{% endblock %}

{% block content %}
<div class="section-title">
    <i class="fas fa-tachometer-alt"></i> Dashboard
</div>

<!-- Statistics Cards -->
<div class="row mb-4">
    <div class="col-md-4 mb-3">
        <div class="card stat-card">
            <div class="stat-value">{{ total_users }}</div>
            <div class="stat-label">Total Users</div>
        </div>
    </div>
    <div class="col-md-4 mb-3">
        <div class="card stat-card">
            <div class="stat-value">{{ total_records }}</div>
            <div class="stat-label">Total Records Kulit</div>
        </div>
    </div>
    <div class="col-md-4 mb-3">
        <div class="card stat-card">
            <div class="stat-value">{{ skin_stats|length }}</div>
            <div class="stat-label">Jenis Kondisi Kulit</div>
        </div>
    </div>
</div>

<div class="row">
    <!-- Recent Users -->
    <div class="col-lg-6 mb-4">
        <div class="card">
            <div class="card-header">
                <i class="fas fa-users"></i> 5 User Terbaru
            </div>
            <div class="card-body p-0">
                {% if recent_users %}
                    <table class="table table-hover mb-0">
                        <thead>
                            <tr>
                                <th>Nama</th>
                                <th>Email</th>
                                <th>Tanggal Daftar</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for user in recent_users %}
                            <tr>
                                <td>
                                    <i class="fas fa-user-circle"></i> {{ user.name }}
                                </td>
                                <td>{{ user.email }}</td>
                                <td>
                                    <small class="text-muted">{{ user.created_at }}</small>
                                </td>
                                <td>
                                    <a href="{{ url_for('web_user_detail', user_id=user.id) }}" class="btn btn-sm btn-primary">
                                        <i class="fas fa-eye"></i> Lihat
                                    </a>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                {% else %}
                    <div class="p-4 text-center text-muted">
                        <i class="fas fa-inbox" style="font-size: 2rem;"></i>
                        <p class="mt-2">Belum ada user terbaru</p>
                    </div>
                {% endif %}
            </div>
            <div class="card-footer text-center">
                <a href="{{ url_for('web_users') }}" class="btn btn-primary btn-sm">
                    Lihat Semua Users
                </a>
            </div>
        </div>
    </div>

    <!-- Skin Condition Statistics -->
    <div class="col-lg-6 mb-4">
        <div class="card">
            <div class="card-header">
                <i class="fas fa-chart-pie"></i> Statistik Kondisi Kulit
            </div>
            <div class="card-body">
                {% if skin_stats %}
                    <table class="table table-sm">
                        <thead>
                            <tr>
                                <th>Kondisi Kulit</th>
                                <th>Jumlah</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for stat in skin_stats %}
                            <tr>
                                <td>
                                    <strong>{{ stat.skin_condition }}</strong>
                                </td>
                                <td>
                                    <span class="badge bg-primary">{{ stat.count }} records</span>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                {% else %}
                    <div class="text-center text-muted p-4">
                        <i class="fas fa-inbox" style="font-size: 2rem;"></i>
                        <p class="mt-2">Belum ada data kondisi kulit</p>
                    </div>
                {% endif %}
            </div>
            <div class="card-footer text-center">
                <a href="{{ url_for('web_skin_data') }}" class="btn btn-primary btn-sm">
                    Lihat Semua Data Kulit
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Quick Actions -->
<div class="card mt-4">
    <div class="card-header">
        <i class="fas fa-lightning-bolt"></i> Aksi Cepat
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-3 mb-2">
                <a href="{{ url_for('web_users') }}" class="btn btn-primary w-100">
                    <i class="fas fa-users"></i> Kelola Users
                </a>
            </div>
            <div class="col-md-3 mb-2">
                <a href="{{ url_for('web_skin_data') }}" class="btn btn-primary w-100">
                    <i class="fas fa-heartbeat"></i> Lihat Data Kulit
                </a>
            </div>
            <div class="col-md-3 mb-2">
                <a href="{{ url_for('web_articles') }}" class="btn btn-primary w-100">
                    <i class="fas fa-newspaper"></i> Kelola Artikel
                </a>
            </div>
            <div class="col-md-3 mb-2">
                <a href="{{ url_for('web_logout') }}" class="btn btn-danger w-100">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
